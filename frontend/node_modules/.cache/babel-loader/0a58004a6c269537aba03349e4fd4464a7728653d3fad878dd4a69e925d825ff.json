{"ast":null,"code":"import{useEffect,useState}from\"react\";import axios from\"axios\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Dashboard(){const[notes,setNotes]=useState([]);const[title,setTitle]=useState(\"\");const[body,setBody]=useState(\"\");const[editing,setEditing]=useState(null);const navigate=useNavigate();// Check if user is logged in\nuseEffect(()=>{const user=localStorage.getItem(\"user\");if(!user){alert(\"Please sign in to access your dashboard.\");navigate(\"/\");}else{loadNotes();}},[]);const loadNotes=async()=>{try{const res=await axios.get(\"http://localhost:5000/notes\");setNotes(res.data);}catch(err){console.error(\"Error fetching notes:\",err);alert(\"Failed to fetch notes. Please check your connection or backend.\");}};const handleAddOrUpdate=async()=>{if(!title||!body)return alert(\"Both title and body are required.\");try{if(editing!==null){await axios.put(`http://localhost:5000/notes/${editing}`,{title,body});setEditing(null);}else{await axios.post(\"http://localhost:5000/notes\",{title,body});}setTitle(\"\");setBody(\"\");loadNotes();}catch(err){console.error(\"Error saving note:\",err);alert(\"Failed to save the note.\");}};const handleEdit=note=>{setTitle(note.title);setBody(note.body);setEditing(note.id);window.scrollTo({top:0,behavior:\"smooth\"});};const handleDelete=async id=>{if(!window.confirm(\"Delete this note?\"))return;try{await axios.delete(`http://localhost:5000/notes/${id}`);loadNotes();}catch(err){console.error(\"Error deleting note:\",err);alert(\"Failed to delete the note.\");}};const handleLogout=()=>{localStorage.removeItem(\"user\");navigate(\"/\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Focus Notes\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-danger\",onClick:handleLogout,children:\"Logout\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card shadow-sm p-4 mb-4\",children:[/*#__PURE__*/_jsx(\"h5\",{children:editing?\"Edit Note\":\"New Note\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control mb-2\",placeholder:\"Note Title\",value:title,onChange:e=>setTitle(e.target.value)}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control mb-3\",rows:\"4\",placeholder:\"Note Body\",value:body,onChange:e=>setBody(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success\",onClick:handleAddOrUpdate,children:editing?\"Update Note\":\"Add Note\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:notes.map(note=>/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 col-lg-4 mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card shadow-sm h-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:note.title}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",children:note.body})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-footer d-flex justify-content-between\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-outline-primary\",onClick:()=>handleEdit(note),children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-outline-danger\",onClick:()=>handleDelete(note.id),children:\"Delete\"})]})]})},note.id))})]});}","map":{"version":3,"names":["useEffect","useState","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","Dashboard","notes","setNotes","title","setTitle","body","setBody","editing","setEditing","navigate","user","localStorage","getItem","alert","loadNotes","res","get","data","err","console","error","handleAddOrUpdate","put","post","handleEdit","note","id","window","scrollTo","top","behavior","handleDelete","confirm","delete","handleLogout","removeItem","className","children","onClick","placeholder","value","onChange","e","target","rows","map"],"sources":["C:/Users/Administrator/Documents/GitHub/notes-app-frontend(react)-backend(flask)/frontend/src/pages/Dashboard.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport default function Dashboard() {\r\n    const [notes, setNotes] = useState([]);\r\n    const [title, setTitle] = useState(\"\");\r\n    const [body, setBody] = useState(\"\");\r\n    const [editing, setEditing] = useState(null);\r\n    const navigate = useNavigate();\r\n\r\n    // Check if user is logged in\r\n    useEffect(() => {\r\n        const user = localStorage.getItem(\"user\");\r\n        if (!user) {\r\n            alert(\"Please sign in to access your dashboard.\");\r\n            navigate(\"/\");\r\n        } else {\r\n            loadNotes();\r\n        }\r\n    }, []);\r\n\r\n    const loadNotes = async () => {\r\n        try {\r\n            const res = await axios.get(\"http://localhost:5000/notes\");\r\n            setNotes(res.data);\r\n        } catch (err) {\r\n            console.error(\"Error fetching notes:\", err);\r\n            alert(\"Failed to fetch notes. Please check your connection or backend.\");\r\n        }\r\n    };\r\n\r\n    const handleAddOrUpdate = async () => {\r\n        if (!title || !body) return alert(\"Both title and body are required.\");\r\n\r\n        try {\r\n            if (editing !== null) {\r\n                await axios.put(`http://localhost:5000/notes/${editing}`, { title, body });\r\n                setEditing(null);\r\n            } else {\r\n                await axios.post(\"http://localhost:5000/notes\", { title, body });\r\n            }\r\n\r\n            setTitle(\"\");\r\n            setBody(\"\");\r\n            loadNotes();\r\n        } catch (err) {\r\n            console.error(\"Error saving note:\", err);\r\n            alert(\"Failed to save the note.\");\r\n        }\r\n    };\r\n\r\n    const handleEdit = (note) => {\r\n        setTitle(note.title);\r\n        setBody(note.body);\r\n        setEditing(note.id);\r\n        window.scrollTo({ top: 0, behavior: \"smooth\" });\r\n    };\r\n\r\n    const handleDelete = async (id) => {\r\n        if (!window.confirm(\"Delete this note?\")) return;\r\n\r\n        try {\r\n            await axios.delete(`http://localhost:5000/notes/${id}`);\r\n            loadNotes();\r\n        } catch (err) {\r\n            console.error(\"Error deleting note:\", err);\r\n            alert(\"Failed to delete the note.\");\r\n        }\r\n    };\r\n\r\n    const handleLogout = () => {\r\n        localStorage.removeItem(\"user\");\r\n        navigate(\"/\");\r\n    };\r\n\r\n    return (\r\n        <div className=\"container mt-5\">\r\n            <div className=\"d-flex justify-content-between align-items-center mb-4\">\r\n                <h2>Focus Notes</h2>\r\n                <button className=\"btn btn-outline-danger\" onClick={handleLogout}>Logout</button>\r\n            </div>\r\n\r\n            <div className=\"card shadow-sm p-4 mb-4\">\r\n                <h5>{editing ? \"Edit Note\" : \"New Note\"}</h5>\r\n                <input\r\n                    className=\"form-control mb-2\"\r\n                    placeholder=\"Note Title\"\r\n                    value={title}\r\n                    onChange={(e) => setTitle(e.target.value)}\r\n                />\r\n                <textarea\r\n                    className=\"form-control mb-3\"\r\n                    rows=\"4\"\r\n                    placeholder=\"Note Body\"\r\n                    value={body}\r\n                    onChange={(e) => setBody(e.target.value)}\r\n                />\r\n                <button className=\"btn btn-success\" onClick={handleAddOrUpdate}>\r\n                    {editing ? \"Update Note\" : \"Add Note\"}\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"row\">\r\n                {notes.map(note => (\r\n                    <div className=\"col-md-6 col-lg-4 mb-4\" key={note.id}>\r\n                        <div className=\"card shadow-sm h-100\">\r\n                            <div className=\"card-body\">\r\n                                <h5 className=\"card-title\">{note.title}</h5>\r\n                                <p className=\"card-text\">{note.body}</p>\r\n                            </div>\r\n                            <div className=\"card-footer d-flex justify-content-between\">\r\n                                <button className=\"btn btn-sm btn-outline-primary\" onClick={() => handleEdit(note)}>Edit</button>\r\n                                <button className=\"btn btn-sm btn-outline-danger\" onClick={() => handleDelete(note.id)}>Delete</button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}